{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://evidenceos.dev/schemas/uvp/propose.schema.json",
  "title": "UVP Propose",
  "type": "object",
  "additionalProperties": false,
  "required": ["uvp_version", "session_id", "causal_dag", "physhir", "payload_hashes"],
  "properties": {
    "uvp_version": {"type": "string", "minLength": 1},
    "session_id": {"type": "string", "minLength": 1},
    "causal_dag": {"$ref": "causal_dag.schema.json"},
    "physhir": {"$ref": "physhir.schema.json"},
    "payload_hashes": {
      "type": "array",
      "items": {"$ref": "#/$defs/payload_hash"}
    }
  },
  "$defs": {
    "payload_hash": {
      "type": "object",
      "additionalProperties": false,
      "required": ["payload_id", "hash"],
      "properties": {
        "payload_id": {"type": "string", "minLength": 1},
        "hash": {"type": "string", "minLength": 1}
      }
    }
  }
}
